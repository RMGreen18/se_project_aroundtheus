!function(){"use strict";const e=document.querySelector("#profile-edit-button"),t=document.querySelector("#card-add-button"),s=document.forms["profile-edit-form"],n=document.querySelector("#profile-title-input"),i=document.querySelector("#profile-description-input"),o=document.querySelector("#card-list"),r=document.forms["card-add-form"],l={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit",inactiveButtonClass:"modal__submit_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class a{constructor(e,t,s){let{name:n,link:i}=e;this._name=n,this._link=i,this._cardSelector=t,this._handleImageClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}_setEventListeners(){this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick({link:this._link,name:this._name})})),this._buttonLike.addEventListener("click",(()=>{this._handleLike(this._buttonLike)})),this._buttonDelete.addEventListener("click",(()=>{this._handleDelete(this._buttonDelete)}))}_handleLike(e){e.classList.toggle("card__like-button_active")}_handleDelete(){this._cardElement.remove()}generateCardElement(){return this._cardElement=this._getTemplate(),this._buttonLike=this._cardElement.querySelector("#card-like-button"),this._buttonDelete=this._cardElement.querySelector("#card-trash-button"),this._cardTitleElement=this._cardElement.querySelector("#card-title"),this._cardImageElement=this._cardElement.querySelector("#card-image"),this._cardTitleElement.textContent=this._name,this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._setEventListeners(),this._cardElement}}class c{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_toggleButtonState(){let e=!1;this._inputElements.forEach((t=>{t.validity.valid||(e=!0)})),e?this._disableSubmit():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_disableSubmit(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._disableSubmit()})),this._setEventListeners()}resetValidation(){this._formElement.reset()}}class u{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",(e=>{e.target===this._popupElement&&this.close()}))}}class m extends u{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=s,this._inputList=Array.from(this._popupForm.querySelectorAll(".modal__input"))}close(){super.close()}_getInputValues=()=>(this._inputValues={},this._inputList.forEach((e=>{this._inputValues[e.name]=e.value})),this._inputValues);setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}const d=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s)}getUserInfo(){return{title:this._nameElement.textContent,description:this._jobElement.textContent}}setUserInfo(e){let{title:t,description:s}=e;this._nameElement.textContent=t,this._jobElement.textContent=s}}({nameSelector:"#profile-title",jobSelector:"#profile-description"}),p=new class{constructor(e,t){let{items:s,renderer:n}=e;this._renderedItems=s,this._renderer=n,this._container=t}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e,this._container)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:S},o);p.renderItems();const _=new m({popupSelector:"#profile-edit-modal",handleFormSubmit:function(e){d.setUserInfo(e),v.resetValidation(),_.close()}});_.setEventListeners();const h=new m({popupSelector:"#card-add-modal",handleFormSubmit:function(e){S(e),f.resetValidation(),h.close()}});h.setEventListeners();const E=new class extends u{constructor(e){let{popupSelector:t}=e;super({popupSelector:t})}open(e){let{link:t,name:s}=e;this._popupImage=this._popupElement.querySelector("#modal-image"),this._popupCaption=this._popupElement.querySelector("#modal-image-caption"),this._popupImage.src=t,this._popupImage.alt=s,this._popupCaption.textContent=s,super.open()}}({popupSelector:"#preview-image-modal"});function S(e){const t=new a(e,"#card-template",b).generateCardElement();p.addItem(t)}function b(e){let{link:t,name:s}=e;E.open({link:t,name:s})}E.setEventListeners(),e.addEventListener("click",(function(){const e=d.getUserInfo();n.value=e.title,i.value=e.description,_.open()})),t.addEventListener("click",(function(){h.open()}));const v=new c(l,s),f=new c(l,r);v.enableValidation(),f.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3ZDZSxFQUFpQjFDLE1BQ25CLElBRUFsRixFQUFjZ0MsaUJBQWlCLFNBQVMsV0FDdEMrRixFQUFhN0MsTUFDZixJQU1BLE1BQU00QyxFQUF1QixJQUFJL0UsRUFBY3hDLEVBQVFOLEdBQ2pEK0gsRUFBb0IsSUFBSWpGLEVBQWN4QyxFQUFRRCxHQUVwRHdILEVBQXFCcEQsbUJBQ3JCc0QsRUFBa0J0RCxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9Jbml0aWFsIENhcmRzXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbi8vIFByb2ZpbGVcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBjYXJkQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWFkZC1idXR0b25cIik7XG5cbi8vUHJvZmlsZSBFZGl0IEZvcm1cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZWRpdC1mb3JtXCJdO1xuZXhwb3J0IGNvbnN0IG1vZGFsVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBtb2RhbERlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5cbi8vQ2FyZHNcbmV4cG9ydCBjb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1saXN0XCIpO1xuXG4vL0NhcmQgQWRkIEZvcm1cbmV4cG9ydCBjb25zdCBjYXJkQWRkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiY2FyZC1hZGQtZm9ybVwiXTtcblxuLy9jb25maWdcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0XCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdF9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IGxpbms6IHRoaXMuX2xpbmssIG5hbWU6IHRoaXMuX25hbWUgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9idXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlKHRoaXMuX2J1dHRvbkxpa2UpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fYnV0dG9uRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGUodGhpcy5fYnV0dG9uRGVsZXRlKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlKGJ1dHRvbikge1xuICAgIGJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZSgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZEVsZW1lbnQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2J1dHRvbkxpa2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fYnV0dG9uRGVsZXRlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRyYXNoLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGVFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtaW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcj0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3M9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcz0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIH1cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGxldCBmb3VuZEludmFsaWQgPSBmYWxzZTtcblxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkgZm91bmRJbnZhbGlkID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGlmIChmb3VuZEludmFsaWQpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9kaXNhYmxlU3VibWl0KCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXQoKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXG4gICAgKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMgPSAoKSA9PiB7XG4gICAgdGhpcy5faW5wdXRWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2lucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVzO1xuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBpbml0aWFsQ2FyZHMsXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBjYXJkQWRkQnV0dG9uLFxuICBwcm9maWxlRWRpdEZvcm0sXG4gIG1vZGFsVGl0bGVJbnB1dCxcbiAgbW9kYWxEZXNjcmlwdGlvbklucHV0LFxuICBjYXJkTGlzdCxcbiAgY2FyZEFkZEZvcm0sXG4gIGNvbmZpZyxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIiNwcm9maWxlLXRpdGxlXCIsXG4gIGpvYlNlbGVjdG9yOiBcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCIsXG59KTtcblxuY29uc3QgY2FyZHNTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHsgaXRlbXM6IGluaXRpYWxDYXJkcywgcmVuZGVyZXI6IHJlbmRlckNhcmQgfSxcbiAgY2FyZExpc3Rcbik7XG5jYXJkc1NlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0LFxufSk7XG5wcm9maWxlRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNhcmRBZGRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjY2FyZC1hZGQtbW9kYWxcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogaGFuZGxlQ2FyZEZvcm1TdWJtaXQsXG59KTtcbmNhcmRBZGRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwcmV2aWV3SW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIixcbn0pO1xucHJldmlld0ltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoaXRlbSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdlbmVyYXRlQ2FyZEVsZW1lbnQoKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGRhdGEpO1xuICBjYXJkc1NlY3Rpb24uYWRkSXRlbShjYXJkKTtcbn1cblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBIYW5kbGVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChkYXRhKSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgcHJvZmlsZUVkaXRQb3B1cC5jbG9zZSgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDYXJkRm9ybVN1Ym1pdChkYXRhKSB7XG4gIHJlbmRlckNhcmQoZGF0YSwgY2FyZExpc3QpO1xuICBjYXJkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgY2FyZEFkZFBvcHVwLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soeyBsaW5rLCBuYW1lIH0pIHtcbiAgcHJldmlld0ltYWdlUG9wdXAub3Blbih7IGxpbmssIG5hbWUgfSk7XG59XG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50IExpc3RlbmVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIG1vZGFsVGl0bGVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLnRpdGxlO1xuICBtb2RhbERlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjtcbiAgcHJvZmlsZUVkaXRQb3B1cC5vcGVuKCk7XG59KTtcblxuY2FyZEFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjYXJkQWRkUG9wdXAub3BlbigpO1xufSk7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWYWxpZGF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHByb2ZpbGVFZGl0Rm9ybSk7XG5jb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgY2FyZEFkZEZvcm0pO1xuXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5jYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IHRpdGxlLCBkZXNjcmlwdGlvbiB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtLCB0aGlzLl9jb250YWluZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShpdGVtKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICB9XG4gIG9wZW4oeyBsaW5rLCBuYW1lIH0pIHtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtaW1hZ2VcIik7XG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIiNtb2RhbC1pbWFnZS1jYXB0aW9uXCJcbiAgICApO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJwcm9maWxlRWRpdEJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNhcmRBZGRCdXR0b24iLCJwcm9maWxlRWRpdEZvcm0iLCJmb3JtcyIsIm1vZGFsVGl0bGVJbnB1dCIsIm1vZGFsRGVzY3JpcHRpb25JbnB1dCIsImNhcmRMaXN0IiwiY2FyZEFkZEZvcm0iLCJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkSW1hZ2VFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9idXR0b25MaWtlIiwiX2hhbmRsZUxpa2UiLCJfYnV0dG9uRGVsZXRlIiwiX2hhbmRsZURlbGV0ZSIsImJ1dHRvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsImdlbmVyYXRlQ2FyZEVsZW1lbnQiLCJfY2FyZFRpdGxlRWxlbWVudCIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dEVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2VFbGVtZW50IiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm91bmRJbnZhbGlkIiwiZm9yRWFjaCIsIl9kaXNhYmxlU3VibWl0IiwiZGlzYWJsZWQiLCJlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwicmVzZXQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnV0dG9uIiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJfcmVmMiIsImNhcmRzU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJwcmVwZW5kIiwicmVuZGVyQ2FyZCIsInByb2ZpbGVFZGl0UG9wdXAiLCJkYXRhIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJjYXJkQWRkUG9wdXAiLCJjYXJkRm9ybVZhbGlkYXRvciIsInByZXZpZXdJbWFnZVBvcHVwIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBDYXB0aW9uIiwiY2FyZCIsInVzZXJEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==
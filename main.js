!function(){"use strict";const e=document.querySelector("#avatar-edit-button"),t=document.forms["avatar-edit-form"],s=document.querySelector("#profile-edit-button"),i=document.querySelector("#card-add-button"),r=document.forms["profile-edit-form"],o=document.querySelector("#profile-title-input"),n=document.querySelector("#profile-description-input"),a=document.querySelector("#card-list"),l=document.forms["card-add-form"],c={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit",inactiveButtonClass:"modal__submit_disabled",inputErrorClass:"modal__input-type_error",errorClass:"modal__error_visible"};class d{constructor(e,t){let{items:s,renderer:i}=e;this._renderedItems=s,this._renderer=i,this._container=t}renderItems(e){e.forEach((e=>{this._renderer(e,this._container)}))}addItem(e){this._container.prepend(e)}}class u{constructor(e,t,s,i,r){let{name:o,link:n,_id:a,isLiked:l}=e;this._name=o,this._link=n,this._id=a,this._likeStatus=l,this._cardSelector=t,this._handleImageClick=s,this._handleCardLike=i,this._handleCardDelete=r}_getTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}_setEventListeners(){this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick({link:this._link,name:this._name})})),this._buttonLike.addEventListener("click",(()=>{this._handleCardLike(this,this._likeStatus,this._id)})),this._buttonDelete.addEventListener("click",(()=>{console.log(this._id),console.log(this._cardElement),this._handleCardDelete(this._id,this._cardElement)}))}_handleLike(){this._buttonLike.classList.toggle("card__like-button_active")}_renderLikes(){this._likeStatus?this._buttonLike.classList.add("card__like-button_active"):this._buttonLike.classList.remove("card__like-button_active")}setLiked(e){this._likeStatus=e,this._renderLikes()}generateCardElement(){return this._cardElement=this._getTemplate(),this._buttonLike=this._cardElement.querySelector("#card-like-button"),this._buttonDelete=this._cardElement.querySelector("#card-trash-button"),this._cardTitleElement=this._cardElement.querySelector("#card-title"),this._cardImageElement=this._cardElement.querySelector("#card-image"),this._cardTitleElement.textContent=this._name,this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this.setLiked(this._likeStatus),this._setEventListeners(),this._cardElement}}class h{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);console.log(e.id),e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);console.log(e.id),e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_toggleButtonState(){let e=!1;this._inputElements.forEach((t=>{t.validity.valid||(e=!0)})),e?this._disableSubmit():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_disableSubmit(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._disableSubmit()})),this._setEventListeners()}resetValidation(){this._formElement.reset()}}class m{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",(e=>{e.target===this._popupElement&&this.close()}))}}class _ extends m{constructor(e){let{popupSelector:t,submitButtonSelector:s,handleFormSubmit:i}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=document.querySelector(s),this._submitButtonText=this._submitButton.textContent,this._handleFormSubmit=i,this._inputList=Array.from(this._popupForm.querySelectorAll(".modal__input"))}close(){super.close()}_getInputValues=()=>(this._inputValues={},this._inputList.forEach((e=>{this._inputValues[e.name]=e.value})),this._inputValues);setLoading(e){e?(this._submitButton.textContent="Saving...",this._submitButton.disabled=!0):this._submitButton.textContent=this._submitButtonText}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}const p=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}getUserAndCardInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}updateUserInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.title,about:e.description})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}updateAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((e=>(console.log(e),e.ok?e.json():Promise.reject(`Error: ${e.status}`)))).then((e=>(console.log(e),e)))}addCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}removeCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}addCardLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).then((e=>(console.log(e),e)))}removeCardLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).then((e=>(console.log(e),e)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"bef088e1-2ae1-4a7b-9925-57c1eac9ed1e","Content-Type":"application/json"}}),E=new class{constructor(e){let{nameSelector:t,jobSelector:s,imageSelector:i}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s),this._imageElement=document.querySelector(i)}getUserInfo(){return{title:this._nameElement.textContent,description:this._jobElement.textContent,avatar:this._imageElement.src}}setAvatar(e){let{avatar:t}=e;this._imageElement.src=t}setUserInfo(e){let{title:t,description:s}=e;this._nameElement.textContent=t,this._jobElement.textContent=s}setProfileInfo(e){let{title:t,description:s,avatar:i}=e;this.setUserInfo({title:t,description:s}),this.setAvatar({avatar:i})}}({nameSelector:"#profile-title",jobSelector:"#profile-description",imageSelector:"#profile-image"});let b;p.getUserAndCardInfo().then((e=>{let[t,s]=e;console.log(t.avatar),console.log(t),E.setProfileInfo({title:t.name,description:t.about,avatar:t.avatar}),b=new d({items:s,renderer:k},a),p.getInitialCards().then((e=>{b.renderItems(e)})).catch((e=>{console.error(e)}))}));const f=new _({popupSelector:"#profile-edit-modal",submitButtonSelector:"#profile-submit-button",handleFormSubmit:function(e){f.setLoading(!0),E.setUserInfo(e),p.updateUserInfo(E.getUserInfo()).catch((e=>{console.error(e)})).finally((()=>f.setLoading(!1))),B.resetValidation(),f.close()}});f.setEventListeners();const v=new _({popupSelector:"#avatar-edit-modal",submitButtonSelector:"#avatar-submit-button",handleFormSubmit:function(e){v.setLoading(!0);const t=e.link;E.setAvatar({avatar:t}),p.updateAvatar(e.link).catch((e=>{console.error(e)})).finally((()=>v.setLoading(!1))),q.resetValidation(),v.close()}});v.setEventListeners();const S=new _({popupSelector:"#card-add-modal",submitButtonSelector:"#card-submit-button",handleFormSubmit:function(e){S.setLoading(!0),p.addCard(e).then((e=>{k(e),U.resetValidation(),S.close()})).catch((e=>{console.error(e)})).finally((()=>S.setLoading(!1)))}});S.setEventListeners();const L=new class extends m{constructor(e){let{popupSelector:t}=e;super({popupSelector:t})}open(e){let{link:t,name:s}=e;this._popupImage=this._popupElement.querySelector("#modal-image"),this._popupCaption=this._popupElement.querySelector("#modal-image-caption"),this._popupImage.src=t,this._popupImage.alt=s,this._popupCaption.textContent=s,super.open()}}({popupSelector:"#preview-image-modal"});L.setEventListeners();const g=new class extends m{constructor(e){let{popupSelector:t}=e;super({popupSelector:t})}close(){super.close()}setConfirmFunction(e){this._confirmFunction=e}setEventListeners(){this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._confirmFunction&&this._confirmFunction()})),super.setEventListeners()}}({popupSelector:"#delete-confirm-modal"});function k(e){const t=new u(e,"#card-template",C,I,y).generateCardElement();b.addItem(t)}function C(e){let{link:t,name:s}=e;L.open({link:t,name:s})}function y(e,t){console.log(e),console.log(t),g.open(),g.setConfirmFunction((()=>{p.removeCard(e).catch((e=>{console.error(e)})),t.remove(),g.close()}))}function I(e,t,s){t?p.removeCardLike(s).then((t=>{console.log(t.isLiked),e.setLiked(t.isLiked)})).catch((e=>{console.error(e)})):p.addCardLike(s).then((t=>{console.log(t.isLiked),e.setLiked(t.isLiked)})).catch((e=>{console.error(e)}))}g.setEventListeners(),s.addEventListener("click",(function(){const e=E.getUserInfo();o.value=e.title,n.value=e.description,f.open()})),e.addEventListener("click",(function(){v.open()})),i.addEventListener("click",(function(){S.open()}));const B=new h(c,r),q=new h(c,t),U=new h(c,l);B.enableValidation(),q.enableValidation(),U.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTLFdBQ3RDc0ksRUFBYW5GLE1BQ2YsSUFLQSxNQUFNZ0YsRUFBdUIsSUFBSWpILEVBQWM5RCxFQUFRTCxHQUNqRHNMLEVBQXNCLElBQUluSCxFQUFjOUQsRUFBUVQsR0FDaEQ2TCxFQUFvQixJQUFJdEgsRUFBYzlELEVBQVFELEdBR3BEZ0wsRUFBcUJ4RixtQkFDckIwRixFQUFvQjFGLG1CQUNwQjZGLEVBQWtCN0Ysa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gUHJvZmlsZVxuZXhwb3J0IGNvbnN0IGF2YXRhckVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhci1lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBhdmF0YXJFZGl0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiYXZhdGFyLWVkaXQtZm9ybVwiXTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBjYXJkQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWFkZC1idXR0b25cIik7XG5cbi8vUHJvZmlsZSBFZGl0IEZvcm1cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZWRpdC1mb3JtXCJdO1xuZXhwb3J0IGNvbnN0IG1vZGFsVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBtb2RhbERlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5cbi8vQ2FyZHNcbmV4cG9ydCBjb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1saXN0XCIpO1xuXG4vL0NhcmQgQWRkIEZvcm1cbmV4cG9ydCBjb25zdCBjYXJkQWRkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiY2FyZC1hZGQtZm9ybVwiXTtcblxuLy9jb25maWdcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0XCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdF9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LXR5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtLCB0aGlzLl9jb250YWluZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShpdGVtKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmssIF9pZCwgaXNMaWtlZCB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZUNhcmRMaWtlLCBoYW5kbGVDYXJkRGVsZXRlKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5faWQgPSBfaWQ7XG4gICAgdGhpcy5fbGlrZVN0YXR1cyA9IGlzTGlrZWQ7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlID0gaGFuZGxlQ2FyZExpa2U7XG4gICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSA9IGhhbmRsZUNhcmREZWxldGU7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbGluazogdGhpcy5fbGluaywgbmFtZTogdGhpcy5fbmFtZSB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2J1dHRvbkxpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlKHRoaXMsIHRoaXMuX2xpa2VTdGF0dXMsIHRoaXMuX2lkKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2J1dHRvbkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2codGhpcy5faWQpO1xuICAgICAgY29uc29sZS5sb2codGhpcy5fY2FyZEVsZW1lbnQpO1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSh0aGlzLl9pZCwgdGhpcy5fY2FyZEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZUxpa2UoKSB7XG4gICAgdGhpcy5fYnV0dG9uTGlrZS5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX3JlbmRlckxpa2VzKCkge1xuICAgIGlmKHRoaXMuX2xpa2VTdGF0dXMpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkxpa2UuY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25MaWtlLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfVxuICB9XG5cbiAgc2V0TGlrZWQoaXNMaWtlZCkge1xuICAgIHRoaXMuX2xpa2VTdGF0dXMgPSBpc0xpa2VkO1xuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmRFbGVtZW50KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9idXR0b25MaWtlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWxpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2J1dHRvbkRlbGV0ZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10cmFzaC1idXR0b25cIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10aXRsZVwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5zZXRMaWtlZCh0aGlzLl9saWtlU3RhdHVzKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3Rvcj0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3I9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3M9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcz0gY29uZmlnLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gWy4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgY29uc29sZS5sb2coaW5wdXRFbGVtZW50LmlkKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBjb25zb2xlLmxvZyhpbnB1dEVsZW1lbnQuaWQpO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgbGV0IGZvdW5kSW52YWxpZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSBmb3VuZEludmFsaWQgPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgaWYgKGZvdW5kSW52YWxpZCkge1xuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX2Rpc2FibGVTdWJtaXQoKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdCgpO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3Rvciwgc3VibWl0QnV0dG9uU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIilcbiAgICApO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcyA9ICgpID0+IHtcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5faW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZXM7XG4gIH07XG5cbiAgc2V0TG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZihpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGF2YXRhckVkaXRCdXR0b24sXG4gIGF2YXRhckVkaXRGb3JtLFxuICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgY2FyZEFkZEJ1dHRvbixcbiAgcHJvZmlsZUVkaXRGb3JtLFxuICBtb2RhbFRpdGxlSW5wdXQsXG4gIG1vZGFsRGVzY3JpcHRpb25JbnB1dCxcbiAgY2FyZExpc3QsXG4gIGNhcmRBZGRGb3JtLFxuICBjb25maWcsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJiZWYwODhlMS0yYWUxLTRhN2ItOTkyNS01N2MxZWFjOWVkMWVcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIjcHJvZmlsZS10aXRsZVwiLFxuICBqb2JTZWxlY3RvcjogXCIjcHJvZmlsZS1kZXNjcmlwdGlvblwiLFxuICBpbWFnZVNlbGVjdG9yOiBcIiNwcm9maWxlLWltYWdlXCIsXG59KTtcblxubGV0IGNhcmRzU2VjdGlvbjtcblxuYXBpLmdldFVzZXJBbmRDYXJkSW5mbygpLnRoZW4oKFtzZXJ2ZXJVc2VySW5mbywgc2VydmVyQ2FyZHNdKSA9PiB7XG4gIGNvbnNvbGUubG9nKHNlcnZlclVzZXJJbmZvLmF2YXRhcik7XG4gIGNvbnNvbGUubG9nKHNlcnZlclVzZXJJbmZvKTtcbiAgdXNlckluZm8uc2V0UHJvZmlsZUluZm8oeyB0aXRsZTogc2VydmVyVXNlckluZm8ubmFtZSwgZGVzY3JpcHRpb246IHNlcnZlclVzZXJJbmZvLmFib3V0LCBhdmF0YXI6IHNlcnZlclVzZXJJbmZvLmF2YXRhciB9KTtcbiAgY2FyZHNTZWN0aW9uID1cbiAgbmV3IFNlY3Rpb24oXG4gICAgeyBpdGVtczogc2VydmVyQ2FyZHMsIHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sXG4gICAgY2FyZExpc3RcbiAgKTtcbiAgYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oZGF0YSA9PiB7XG4gICAgY2FyZHNTZWN0aW9uLnJlbmRlckl0ZW1zKGRhdGEpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgfSlcbn0pXG5cblxuY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOlwiI3Byb2ZpbGUtc3VibWl0LWJ1dHRvblwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCxcbn0pO1xucHJvZmlsZUVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhdmF0YXJFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiI2F2YXRhci1lZGl0LW1vZGFsXCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOlwiI2F2YXRhci1zdWJtaXQtYnV0dG9uXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IGhhbmRsZUF2YXRhckZvcm1TdWJtaXQsXG59KVxuYXZhdGFyRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNhcmRBZGRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjY2FyZC1hZGQtbW9kYWxcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6XCIjY2FyZC1zdWJtaXQtYnV0dG9uXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IGhhbmRsZUNhcmRGb3JtU3VibWl0LFxufSk7XG5jYXJkQWRkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcHJldmlld0ltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIsXG59KTtcbnByZXZpZXdJbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGRlbGV0ZUNvbmZpcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjZGVsZXRlLWNvbmZpcm0tbW9kYWxcIlxufSk7XG5kZWxldGVDb25maXJtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChpdGVtLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZUNhcmRMaWtlLCBoYW5kbGVDYXJkRGVsZXRlKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdlbmVyYXRlQ2FyZEVsZW1lbnQoKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGRhdGEpO1xuICBjYXJkc1NlY3Rpb24uYWRkSXRlbShjYXJkKTtcbn1cblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBIYW5kbGVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChkYXRhKSB7XG4gIHByb2ZpbGVFZGl0UG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gIGFwaS51cGRhdGVVc2VySW5mbyh1c2VySW5mby5nZXRVc2VySW5mbygpKVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgfSlcbiAgLmZpbmFsbHkoKCkgPT4gcHJvZmlsZUVkaXRQb3B1cC5zZXRMb2FkaW5nKGZhbHNlKSk7XG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwcm9maWxlRWRpdFBvcHVwLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQoZGF0YSkge1xuYXZhdGFyRWRpdFBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XG5jb25zdCBhdmF0YXIgPSBkYXRhLmxpbms7XG51c2VySW5mby5zZXRBdmF0YXIoeyBhdmF0YXIgfSk7XG5hcGkudXBkYXRlQXZhdGFyKGRhdGEubGluaylcbi5jYXRjaCgoZXJyKSA9PiB7XG4gIGNvbnNvbGUuZXJyb3IoZXJyKTtcbn0pXG4uZmluYWxseSgoKSA9PiBhdmF0YXJFZGl0UG9wdXAuc2V0TG9hZGluZyhmYWxzZSkpO1xuYXZhdGFyRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbmF2YXRhckVkaXRQb3B1cC5jbG9zZSgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDYXJkRm9ybVN1Ym1pdChkYXRhKSB7XG4gIGNhcmRBZGRQb3B1cC5zZXRMb2FkaW5nKHRydWUpO1xuICBhcGkuYWRkQ2FyZChkYXRhKVxuICAudGhlbigoY2FyZCkgPT4ge1xuICByZW5kZXJDYXJkKGNhcmQsIGNhcmRMaXN0KTtcbiAgY2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGNhcmRBZGRQb3B1cC5jbG9zZSgpO30pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KVxuICAuZmluYWxseSgoKSA9PiBjYXJkQWRkUG9wdXAuc2V0TG9hZGluZyhmYWxzZSkpO1xufVxuXG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soeyBsaW5rLCBuYW1lIH0pIHtcbiAgcHJldmlld0ltYWdlUG9wdXAub3Blbih7IGxpbmssIG5hbWUgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmREZWxldGUoY2FyZElkLCBjYXJkKSB7XG4gIGNvbnNvbGUubG9nKGNhcmRJZCk7XG4gIGNvbnNvbGUubG9nKGNhcmQpO1xuICBkZWxldGVDb25maXJtUG9wdXAub3BlbigpO1xuZGVsZXRlQ29uZmlybVBvcHVwLnNldENvbmZpcm1GdW5jdGlvbiggKCkgPT4ge1xuICBhcGkucmVtb3ZlQ2FyZChjYXJkSWQpXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcbiAgY2FyZC5yZW1vdmUoKTtcbiAgZGVsZXRlQ29uZmlybVBvcHVwLmNsb3NlKClcbn0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDYXJkTGlrZShjYXJkLCBsaWtlU3RhdHVzLCBjYXJkSWQpIHtcbmlmKCFsaWtlU3RhdHVzKXtcbiAgYXBpLmFkZENhcmRMaWtlKGNhcmRJZCkudGhlbigocmVzKSA9PiB7XG4gICAgY29uc29sZS5sb2cocmVzLmlzTGlrZWQpO1xuICAgIGNhcmQuc2V0TGlrZWQocmVzLmlzTGlrZWQpO1xuICB9XG4pXG4uY2F0Y2goKGVycikgPT4ge1xuICBjb25zb2xlLmVycm9yKGVycik7XG59KTtcbn1cbmVsc2Uge1xuICBhcGkucmVtb3ZlQ2FyZExpa2UoY2FyZElkKS50aGVuKChyZXMpID0+IHtcbiAgICBjb25zb2xlLmxvZyhyZXMuaXNMaWtlZCk7XG4gICAgY2FyZC5zZXRMaWtlZChyZXMuaXNMaWtlZCk7XG4gIH1cbilcbi5jYXRjaCgoZXJyKSA9PiB7XG4gIGNvbnNvbGUuZXJyb3IoZXJyKTtcbn0pO1xufVxufVxuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50IExpc3RlbmVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIG1vZGFsVGl0bGVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLnRpdGxlO1xuICBtb2RhbERlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjtcbiAgcHJvZmlsZUVkaXRQb3B1cC5vcGVuKCk7XG59KTtcblxuYXZhdGFyRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBhdmF0YXJFZGl0UG9wdXAub3BlbigpO1xufSlcblxuY2FyZEFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjYXJkQWRkUG9wdXAub3BlbigpO1xufSk7XG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsaWRhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRWRpdEZvcm0pO1xuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgYXZhdGFyRWRpdEZvcm0pXG5jb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgY2FyZEFkZEZvcm0pO1xuXG5cbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpOyIsIi8vIFwidG9rZW5cIjpcImJlZjA4OGUxLTJhZTEtNGE3Yi05OTI1LTU3YzFlYWM5ZWQxZVwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YClcbiAgICB9KTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKVxuICAgIH0pO1xuICB9XG5cbiAgZ2V0VXNlckFuZENhcmRJbmZvKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRVc2VySW5mbygpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpXSk7XG4gIH1cblxuICB1cGRhdGVVc2VySW5mbyhkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBkYXRhLnRpdGxlLFxuICAgICAgICBhYm91dDogZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKVxuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlQXZhdGFyKGxpbmspIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGxpbmssXG4gICAgICB9KVxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YClcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkQ2FyZChkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgbGluazogZGF0YS5saW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApXG4gICAgfSk7XG4gIH1cblxuICByZW1vdmVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKVxuICAgIH0pO1xuICB9XG5cbiAgYWRkQ2FyZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDpcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgIC50aGVuKChyZXMpPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKVxuICAgIH0pXG4gICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlQ2FyZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gIH0pXG4gIC50aGVuKChyZXMpPT4ge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YClcbiAgfSlcbiAgLnRoZW4oZGF0YSA9PiB7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgaW1hZ2VTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaW1hZ2VTZWxlY3Rvcik7XG4gIH1cblxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0aXRsZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGF2YXRhcjogdGhpcy5faW1hZ2VFbGVtZW50LnNyYyxcbiAgICB9O1xuICB9XG5cbiAgc2V0QXZhdGFyKHsgYXZhdGFyIH0pIHtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjID0gYXZhdGFyO1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyB0aXRsZSwgZGVzY3JpcHRpb24gfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xuICB9XG5cbiAgc2V0UHJvZmlsZUluZm8oeyB0aXRsZSwgZGVzY3JpcHRpb24sIGF2YXRhciB9KSB7XG4gICAgdGhpcy5zZXRVc2VySW5mbyh7IHRpdGxlLCBkZXNjcmlwdGlvbiB9KTtcbiAgICB0aGlzLnNldEF2YXRhcih7IGF2YXRhciB9KTtcbiAgfVxufVxuXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgfVxuICBvcGVuKHsgbGluaywgbmFtZSB9KSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWltYWdlXCIpO1xuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIjbW9kYWwtaW1hZ2UtY2FwdGlvblwiXG4gICAgKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cblxuICBzZXRDb25maXJtRnVuY3Rpb24oY29uZmlybUZ1bmN0aW9uKSB7XG4gICAgdGhpcy5fY29uZmlybUZ1bmN0aW9uID0gY29uZmlybUZ1bmN0aW9uO1xuICB9XG5cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmKHRoaXMuX2NvbmZpcm1GdW5jdGlvbikge1xuICAgICAgICB0aGlzLl9jb25maXJtRnVuY3Rpb24oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59Il0sIm5hbWVzIjpbImF2YXRhckVkaXRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhdmF0YXJFZGl0Rm9ybSIsImZvcm1zIiwicHJvZmlsZUVkaXRCdXR0b24iLCJjYXJkQWRkQnV0dG9uIiwicHJvZmlsZUVkaXRGb3JtIiwibW9kYWxUaXRsZUlucHV0IiwibW9kYWxEZXNjcmlwdGlvbklucHV0IiwiY2FyZExpc3QiLCJjYXJkQWRkRm9ybSIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiU2VjdGlvbiIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsInRoaXMiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImZvckVhY2giLCJpdGVtIiwiYWRkSXRlbSIsInByZXBlbmQiLCJDYXJkIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZUNhcmRMaWtlIiwiaGFuZGxlQ2FyZERlbGV0ZSIsIm5hbWUiLCJsaW5rIiwiX2lkIiwiaXNMaWtlZCIsIl9uYW1lIiwiX2xpbmsiLCJfbGlrZVN0YXR1cyIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVDYXJkTGlrZSIsIl9oYW5kbGVDYXJkRGVsZXRlIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2J1dHRvbkxpa2UiLCJfYnV0dG9uRGVsZXRlIiwiY29uc29sZSIsImxvZyIsIl9jYXJkRWxlbWVudCIsIl9oYW5kbGVMaWtlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX3JlbmRlckxpa2VzIiwiYWRkIiwicmVtb3ZlIiwic2V0TGlrZWQiLCJnZW5lcmF0ZUNhcmRFbGVtZW50IiwiX2NhcmRUaXRsZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvdW5kSW52YWxpZCIsIl9kaXNhYmxlU3VibWl0IiwiZGlzYWJsZWQiLCJlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwicmVzZXQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnV0dG9uIiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfc3VibWl0QnV0dG9uVGV4dCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsIl9nZXRJbnB1dFZhbHVlcyIsIl9pbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJzZXRMb2FkaW5nIiwiaXNMb2FkaW5nIiwiYXBpIiwib3B0aW9ucyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJBbmRDYXJkSW5mbyIsImFsbCIsInVwZGF0ZVVzZXJJbmZvIiwiZGF0YSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGl0bGUiLCJhYm91dCIsImRlc2NyaXB0aW9uIiwidXBkYXRlQXZhdGFyIiwiYXZhdGFyIiwiYWRkQ2FyZCIsInJlbW92ZUNhcmQiLCJjYXJkSWQiLCJhZGRDYXJkTGlrZSIsInJlbW92ZUNhcmRMaWtlIiwiYXV0aG9yaXphdGlvbiIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJpbWFnZVNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJfaW1hZ2VFbGVtZW50Iiwic2V0QXZhdGFyIiwiX3JlZjIiLCJzZXRVc2VySW5mbyIsIl9yZWYzIiwic2V0UHJvZmlsZUluZm8iLCJfcmVmNCIsImNhcmRzU2VjdGlvbiIsInNlcnZlclVzZXJJbmZvIiwic2VydmVyQ2FyZHMiLCJyZW5kZXJDYXJkIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsInByb2ZpbGVFZGl0UG9wdXAiLCJmaW5hbGx5IiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJhdmF0YXJFZGl0UG9wdXAiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwiY2FyZEFkZFBvcHVwIiwiY2FyZCIsImNhcmRGb3JtVmFsaWRhdG9yIiwicHJldmlld0ltYWdlUG9wdXAiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cENhcHRpb24iLCJkZWxldGVDb25maXJtUG9wdXAiLCJzZXRDb25maXJtRnVuY3Rpb24iLCJjb25maXJtRnVuY3Rpb24iLCJfY29uZmlybUZ1bmN0aW9uIiwibGlrZVN0YXR1cyIsInVzZXJEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==